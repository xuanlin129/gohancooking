import{z as S,E as b,_ as k,G as u,K as x,L as l,c as n,aG as C,S as t,H as c,R as g,O as m,X as s,aD as v,V,a as B,W as D,ai as $,ah as F,aM as M,aH as T}from"./index-b1644f5a.js";import{V as L}from"./VContainer-d36cbcd5.js";import{a as w,V as N}from"./VRow-97107065.js";import{b as j}from"./VToolbar-9fbf75cd.js";/* empty css              */const q=t("h1",{class:"text-center"},"訂單管理",-1),A=t("thead",null,[t("tr",null,[t("th",null,"編號"),t("th",null,"日期"),t("th",null,"使用者"),t("th",null,"明細")])],-1),E=t("h4",null,"收件資訊",-1),G=t("h4",null,"商品清單",-1),W={__name:"OrdersView",setup(H){const y=S(),d=b([]),p=e=>new Date(e).getFullYear().toString(),_=e=>new Date(e.date).getMonth()<9?`0${(new Date(e.date).getMonth()+1).toString()}`:`${(new Date(e.date).getMonth()+1).toString()}`,f=e=>new Date(e.date).getDate()<9?`0${new Date(e.date).getDate().toString()}`:`${new Date(e.date).getDate().toString()}`,h=e=>e.split("").splice(11).join("");return(async()=>{try{const{data:e}=await k.get("/orders/all");d.value.push(...e.result.map(i=>(i.total=i.cart.reduce((a,o)=>a+o.product.price*o.quantity,0),i)))}catch(e){y({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}})(),(e,i)=>(u(),x(L,null,{default:l(()=>[n(N,null,{default:l(()=>[n(w,{cols:"12"},{default:l(()=>[q]),_:1}),n(w,{cols:"12"},{default:l(()=>[n(C,{style:{border:"1px solid #d9d9cf",width:"80%",margin:"auto"}},{default:l(()=>[A,t("tbody",null,[(u(!0),c(m,null,g(d.value,a=>(u(),c("tr",{key:a.id},[t("td",null,s(p(a.date)+_(a)+f(a)+h(a._id)),1),t("td",null,s(new Date(a.date).toLocaleString()),1),t("td",null,s(a.user.name),1),t("td",null,[n(v,{transition:"dialog-bottom-transition",width:"500px"},{activator:l(({props:o})=>[n(V,B({color:"#43808F"},o,{style:{color:"#fff"}}),{default:l(()=>[D("查詢明細")]),_:2},1040)]),default:l(({isActive:o})=>[n($,null,{default:l(()=>[n(j,{color:"#43808F",style:{color:"#fff"},title:"訂單編號："+p(a.date)+_(a)+f(a)+h(a._id)},null,8,["title"]),n(F,{id:"orderDialog"},{default:l(()=>[E,t("p",null,"購買人："+s(a.purchaser),1),t("p",null,"聯絡電話："+s(a.phone),1),t("p",null,"取貨方式："+s(a.delivery),1),t("p",null,"訂單金額："+s(a.total),1),n(M),G,(u(!0),c(m,null,g(a.cart,r=>(u(),c("ul",{key:r._id},[t("li",null,s(r.product.name)+"："+s(r.quantity)+" 個",1)]))),128))]),_:2},1024),n(T,{class:"justify-end"},{default:l(()=>[n(V,{variant:"text",onClick:r=>o.value=!1},{default:l(()=>[D("關閉")]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{W as default};
