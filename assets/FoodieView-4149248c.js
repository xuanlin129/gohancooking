import{p as x,b as S,g as w,u as P,c as e,aH as T,f as q,aI as $,D as B,n as L,I as M,ax as j,e as E,j as z,t as V,az as H,k as J,aA as O,s as A,aJ as U,O as N,a as G,x as K,z as Q,A as W,_ as X,E as Y,ai as Z,G as ee,H as ae,S as c,L as i,aK as te,aL as D,P as se,Q as I,X as k,J as v,al as re,V as h,aM as le,am as ie,W as F}from"./index-917455ea.js";import{F as oe}from"./FooterView-6105d614.js";import{c as ne,e as ue,u as ce,b as de,V as me}from"./index.esm-4272940d.js";import{V as ve}from"./VContainer-e551f667.js";import{V as R,a as y}from"./VRow-e0d1fdb1.js";import"./logo_lineImg_light-dd5d790e.js";import"./logo_word_light-deaadfda.js";import"./_commonjsHelpers-39b5b250.js";/* empty css              */const be=x({divider:[Number,String],...S()},"VBreadcrumbsDivider"),fe=w()({name:"VBreadcrumbsDivider",props:be(),setup(a,b){let{slots:t}=b;return P(()=>{var d;return e("li",{class:["v-breadcrumbs-divider",a.class],style:a.style},[((d=t==null?void 0:t.default)==null?void 0:d.call(t))??a.divider])}),{}}}),ge=x({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...S(),...T(),...q({tag:"li"})},"VBreadcrumbsItem"),ye=w()({name:"VBreadcrumbsItem",props:ge(),setup(a,b){let{slots:t,attrs:d}=b;const m=$(a,d),n=B(()=>{var l;return a.active||((l=m.isActive)==null?void 0:l.value)}),p=B(()=>n.value?a.activeColor:a.color),{textColorClasses:_,textColorStyles:o}=L(p);return P(()=>e(a.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":n.value,"v-breadcrumbs-item--disabled":a.disabled,[`${a.activeClass}`]:n.value&&a.activeClass},_.value,a.class],style:[o.value,a.style],"aria-current":n.value?"page":void 0},{default:()=>{var l,f;return[m.isLink.value?e("a",{class:"v-breadcrumbs-item--link",href:m.href.value,"aria-current":n.value?"page":void 0,onClick:m.navigate},[((f=t.default)==null?void 0:f.call(t))??a.title]):((l=t.default)==null?void 0:l.call(t))??a.title]}})),{}}}),Ve=x({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:M,items:{type:Array,default:()=>[]},...S(),...j(),...E(),...q({tag:"ul"})},"VBreadcrumbs"),pe=w()({name:"VBreadcrumbs",props:Ve(),setup(a,b){let{slots:t}=b;const{backgroundColorClasses:d,backgroundColorStyles:m}=z(V(a,"bgColor")),{densityClasses:n}=H(a),{roundedClasses:p}=J(a);O({VBreadcrumbsDivider:{divider:V(a,"divider")},VBreadcrumbsItem:{activeClass:V(a,"activeClass"),activeColor:V(a,"activeColor"),color:V(a,"color"),disabled:V(a,"disabled")}});const _=B(()=>a.items.map(o=>typeof o=="string"?{item:{title:o},raw:o}:{item:o,raw:o}));return P(()=>{const o=!!(t.prepend||a.icon);return e(a.tag,{class:["v-breadcrumbs",d.value,n.value,p.value,a.class],style:[m.value,a.style]},{default:()=>{var l;return[o&&e("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[t.prepend?e(U,{key:"prepend-defaults",disabled:!a.icon,defaults:{VIcon:{icon:a.icon,start:!0}}},t.prepend):e(A,{key:"prepend-icon",start:!0,icon:a.icon},null)]),_.value.map((f,s,C)=>{let{item:r,raw:u}=f;return e(N,null,[e(ye,G({key:r.title,disabled:s>=C.length-1},r),{default:t.title?()=>{var g;return(g=t.title)==null?void 0:g.call(t,{item:u,index:s})}:void 0}),s<C.length-1&&e(fe,null,{default:t.divider?()=>{var g;return(g=t.divider)==null?void 0:g.call(t,{item:u,index:s})}:void 0})])}),(l=t.default)==null?void 0:l.call(t)]}})}),{}}}),_e={id:"foodieView"},Ce={class:"d-flex ms-auto ms-lg-0",style:{width:"150px"}},he=c("h3",{class:"mb-4"},"商品描述",-1),ke={style:{width:"50vw",height:"50vh",background:"rgba(0, 0, 0, 0.5)"},class:"align-center justify-space-evenly d-flex flex-column"},Be=c("h1",{class:"text-center",style:{color:"#ffffff"}},"商品已售完",-1),xe={id:"footer"},Ne={__name:"FoodieView",setup(a){const b=K(),t=Q(),d=W(),m=()=>{l.value.value+=1},n=()=>{l.value.value-=1},p=ne({quantity:ue().typeError("缺少數量").required("缺少數量").min(1,"最少為 1")}),{isSubmitting:_,handleSubmit:o}=ce({validationSchema:p,initialValues:{quantity:1}}),l=de("quantity"),f=o(async r=>{try{const{data:u}=await X.post("/users/cart",{product:s.value._id,quantity:r.quantity});d.cart=u.result}catch(u){t({text:u.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}}),s=Y({_id:"",name:"",price:0,description:"",image:"",sell:!0,inventory:0,category:""});(async()=>{try{const{data:r}=await Z.get("/products/"+b.params.id);s.value._id=r.result._id,s.value.name=r.result.name,s.value.price=r.result.price,s.value.description=r.result.description,s.value.image=r.result.image,s.value.inventory=r.result.inventory,s.value.category=r.result.category,s.value.sell=r.result.sell,document.title="煮飯研究所 | "+r.result.name}catch(r){t({text:r.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}})();const C=()=>["美味專區",s.value.category,s.value.name];return(r,u)=>(ee(),ae(N,null,[c("div",_e,[e(ve,null,{default:i(()=>[e(R,null,{default:i(()=>[e(y,{cols:"12"},{default:i(()=>[e(pe,{items:C(),active:"true","active-color":"#fff"},{divider:i(()=>[e(A,{icon:"mdi-chevron-right"})]),_:1},8,["items"]),e(D)]),_:1}),e(y,{cols:"12",sm:"7",md:"7",style:{position:"relative"}},{default:i(()=>[e(se,{class:"mx-auto",src:s.value.image,"aspect-ratio":"1",cover:""},null,8,["src"])]),_:1}),e(I),e(y,{cols:"12",sm:"5",md:"5"},{default:i(()=>[e(R,{class:"h-100"},{default:i(()=>[e(y,{cols:"12"},{default:i(()=>[c("h2",null,k(s.value.name),1),c("h4",null,"NT $ "+k(s.value.price),1)]),_:1}),e(y,{cols:"12",md:"6",lg:"4",class:"mt-auto"},{default:i(()=>[e(me,{disabled:v(_),onSubmit:re(v(f),["prevent"])},{default:i(()=>[c("div",Ce,[e(h,{variant:"text",icon:"mdi-minus",onClick:n,disabled:v(l).value.value<=1},null,8,["disabled"]),e(le,{class:"mx-auto","max-width":"80"},{default:i(()=>[e(ie,{variant:"outlined",density:"compact",type:"text",modelValue:v(l).value.value,"onUpdate:modelValue":u[0]||(u[0]=g=>v(l).value.value=g),modelModifiers:{number:!0},min:"0","error-messages":v(l).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(h,{variant:"text",icon:"mdi-plus",onClick:m,disabled:v(l).value.value===s.value.inventory},null,8,["disabled"])])]),_:1},8,["disabled","onSubmit"])]),_:1}),e(I),e(y,{cols:"12",md:"6",class:"text-center text-sm-right mt-md-auto"},{default:i(()=>[e(h,{onClick:v(f),class:"btn-primary mb-md-6"},{default:i(()=>[F("加入購物車")]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),e(D),e(y,{cols:"12",class:"text-center",style:{padding:"50px 0"}},{default:i(()=>[he,c("pre",null,k(s.value.description),1)]),_:1})]),_:1})]),_:1})]),e(te,{"model-value":!s.value.sell,persistent:"",class:"align-center justify-center"},{default:i(()=>[c("div",ke,[Be,e(h,{to:"/"},{default:i(()=>[F("回上頁")]),_:1})])]),_:1},8,["model-value"]),c("section",xe,[e(oe)])],64))}};export{Ne as default};
