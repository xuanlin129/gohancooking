import{z as k,y,A as S,aj as C,F as B,G as F,H as M,c as t,L as a,J as s,am as N,S as o,W as r,an as _,V as R}from"./index-e5ea9d2f.js";import{c as U,a as f,u as q,b,V as L}from"./index.esm-9acfa21c.js";import{V as P}from"./VContainer-858c4210.js";import{V as T,a as d}from"./VRow-d2216653.js";import"./_commonjsHelpers-39b5b250.js";/* empty css              */const $={id:"login",class:"mx-auto"},j=o("h1",{class:"text-center h1-title mb-1"},"會員登入",-1),z={class:"d-flex align-center"},A={class:"d-flex align-center"},E={class:"text-center"},G={class:"d-flex flex-column text-center"},H=o("span",{class:"mb-2"},"還沒加入我們嗎？",-1),X={__name:"LoginView",setup(J){const m=k(),p=y(),x=S(),v=()=>{p.push("/register")},g=U({account:f().required("帳號必填").min(4,"帳號最少 4 個字").max(20,"帳號最多 20 個字"),password:f().required("密碼必填").min(4,"密碼最少 4 個字").max(20,"密碼最多 20 個字")}),{handleSubmit:h,isSubmitting:V}=q({validationSchema:g}),l=b("account"),n=b("password"),w=h(async c=>{try{const{data:e}=await C.post("/users/login",{account:c.account,password:c.password});x.login({token:e.result.token,account:e.result.account,email:e.result.email,cart:e.result.cart,role:e.result.role,name:e.result.name,avatar:e.result.avatar,address:e.result.address,phone:e.result.phone}),m({text:"登入成功",showCloseButton:!1,snackbarProps:{timeout:3e3,color:"green",location:"bottom"}}),p.push("/home")}catch(e){m({text:e.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}});return(c,e)=>{const u=B("v-text");return F(),M("section",$,[t(P,null,{default:a(()=>[t(T,{class:"mx-auto"},{default:a(()=>[t(d,{cols:"12",style:{margin:"20px 0"}},{default:a(()=>[j]),_:1}),t(d,{cols:"12",class:"mb-5"},{default:a(()=>[t(L,{disabled:s(V),onSubmit:N(s(w),["prevent"])},{default:a(()=>[o("div",z,[t(u,null,{default:a(()=>[r("帳號：")]),_:1}),t(_,{modelValue:s(l).value.value,"onUpdate:modelValue":e[0]||(e[0]=i=>s(l).value.value=i),"error-messages":s(l).errorMessage.value,density:"compact",variant:"outlined",label:"請輸入帳號",maxlength:"20",clearable:""},null,8,["modelValue","error-messages"])]),o("div",A,[t(u,null,{default:a(()=>[r("密碼：")]),_:1}),t(_,{modelValue:s(n).value.value,"onUpdate:modelValue":e[1]||(e[1]=i=>s(n).value.value=i),"error-messages":s(n).errorMessage.value,density:"compact",variant:"outlined",label:"請輸入密碼",maxlength:"20",type:"password",clearable:""},null,8,["modelValue","error-messages"])]),o("div",E,[t(R,{type:"submit",class:"btn-primary"},{default:a(()=>[r("登入")]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1}),t(d,{cols:"12"},{default:a(()=>[o("div",G,[H,t(u,{id:"toRegister",onClick:v},{default:a(()=>[r("註冊帳號")]),_:1})])]),_:1})]),_:1})]),_:1})])}}};export{X as default};
