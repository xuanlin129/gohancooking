import{z as S,E as y,_ as V,G as u,K as k,L as l,c as o,aF as d,S as e,H as c,R as p,O as _,X as s}from"./index-959fdd5d.js";import{V as b}from"./VContainer-e9c44d90.js";import{a as h,V as x}from"./VRow-cf524115.js";/* empty css              */const B=e("h1",{class:"text-center"},"訂單管理",-1),C=e("thead",null,[e("tr",null,[e("th",null,"編號"),e("th",null,"日期"),e("th",null,"使用者"),e("th",null,"金額"),e("th",null,"商品")])],-1),v={__name:"OrdersView",setup($){const g=S(),i=y([]),m=t=>new Date(t).getFullYear().toString(),f=t=>new Date(t.date).getMonth()<9?`0${(new Date(t.date).getMonth()+1).toString()}`:`${(new Date(t.date).getMonth()+1).toString()}`,w=t=>new Date(t.date).getDate()<9?`0${new Date(t.date).getDate().toString()}`:`${new Date(t.date).getDate().toString()}`,D=t=>t.split("").splice(11).join("");return(async()=>{try{const{data:t}=await V.get("/orders/all");i.value.push(...t.result.map(r=>(r.total=r.cart.reduce((a,n)=>a+n.product.price*n.quantity,0),r)))}catch(t){g({text:t.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}})(),(t,r)=>(u(),k(b,null,{default:l(()=>[o(x,null,{default:l(()=>[o(h,{cols:"12"},{default:l(()=>[B]),_:1}),o(h,{cols:"12"},{default:l(()=>[o(d,{style:{border:"1px solid #d9d9cf",width:"80%",margin:"auto"}},{default:l(()=>[C,e("tbody",null,[(u(!0),c(_,null,p(i.value,a=>(u(),c("tr",{key:a.id},[e("td",null,s(m(a.date)+f(a)+w(a)+D(a._id)),1),e("td",null,s(new Date(a.date).toLocaleString()),1),e("td",null,s(a.user.name),1),e("td",null,s(a.total),1),e("td",null,[o(d,null,{default:l(()=>[(u(!0),c(_,null,p(a.cart,n=>(u(),c("tr",{key:n._id},[e("td",null,s(n.product.name)+"：",1),e("td",null,s(n.quantity)+" 個",1)]))),128))]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{v as default};
