import{F as Te}from"./FooterView-08d21309.js";import{p as ne,I as de,b as ze,f as Se,ao as Pe,g as se,ap as Be,C as Re,aq as $e,ar as U,D as P,a1 as ve,as as De,a3 as Me,u as oe,c as s,at as fe,s as me,au as Ae,a5 as Fe,av as Ee,m as Ie,n as Oe,E as B,V as H,a as ae,aw as Ue,ax as He,ay as Ge,az as Le,aA as Ne,j as qe,t as O,aB as We,aC as Xe,z as Ye,_ as Y,F as je,G as x,H as R,L as c,aD as Ke,S as d,O as ee,ai as pe,W as N,ah as Je,aE as Qe,aF as ge,P as Ze,K as E,N as w,X as z,an as j,aG as he,R as ye,aH as et}from"./index-6356e235.js";import{V as tt}from"./VContainer-72a6c4f4.js";import{V as te,a as $}from"./VRow-91a6ffd1.js";import"./logo_lineImg_light-dd5d790e.js";import"./logo_word_light-deaadfda.js";/* empty css              */function be(e){const r=Math.abs(e);return Math.sign(e)*(r/((1/.501-2)*(1-r)+1))}function xe(e){let{selectedElement:g,containerSize:r,contentSize:f,isRtl:_,currentScrollOffset:t,isHorizontal:l}=e;const n=l?g.clientWidth:g.clientHeight,p=l?g.offsetLeft:g.offsetTop,m=_&&l?f-p-n:p,h=r+t,V=n+m,b=n*.4;return m<=t?t=Math.max(m-b,0):h<=V&&(t=Math.min(t-(h-V-b),f-r)),t}function at(e){let{selectedElement:g,containerSize:r,contentSize:f,isRtl:_,isHorizontal:t}=e;const l=t?g.clientWidth:g.clientHeight,n=t?g.offsetLeft:g.offsetTop,p=_&&t?f-n-l/2-r/2:n+l/2-r/2;return Math.min(f-r,Math.max(0,p))}const lt=Symbol.for("vuetify:v-slide-group"),Ve=ne({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:lt},nextIcon:{type:de,default:"$next"},prevIcon:{type:de,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...ze(),...Se(),...Pe({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),_e=se()({name:"VSlideGroup",props:Ve(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:r}=g;const{isRtl:f}=Be(),{mobile:_}=Re(),t=$e(e,e.symbol),l=U(!1),n=U(0),p=U(0),m=U(0),h=P(()=>e.direction==="horizontal"),{resizeRef:V,contentRect:b}=ve(),{resizeRef:y,contentRect:D}=ve(),M=P(()=>t.selected.value.length?t.items.value.findIndex(i=>i.id===t.selected.value[0]):-1),I=P(()=>t.selected.value.length?t.items.value.findIndex(i=>i.id===t.selected.value[t.selected.value.length-1]):-1);if(De){let i=-1;Me(()=>[t.selected.value,b.value,D.value,h.value],()=>{cancelAnimationFrame(i),i=requestAnimationFrame(()=>{if(b.value&&D.value){const v=h.value?"width":"height";p.value=b.value[v],m.value=D.value[v],l.value=p.value+1<m.value}if(M.value>=0&&y.value){const v=y.value.children[I.value];M.value===0||!l.value?n.value=0:e.centerActive?n.value=at({selectedElement:v,containerSize:p.value,contentSize:m.value,isRtl:f.value,isHorizontal:h.value}):l.value&&(n.value=xe({selectedElement:v,containerSize:p.value,contentSize:m.value,isRtl:f.value,currentScrollOffset:n.value,isHorizontal:h.value}))}})})}const o=U(!1);let a=0,S=0;function u(i){const v=h.value?"clientX":"clientY";S=(f.value&&h.value?-1:1)*n.value,a=i.touches[0][v],o.value=!0}function T(i){if(!l.value)return;const v=h.value?"clientX":"clientY",C=f.value&&h.value?-1:1;n.value=C*(S+a-i.touches[0][v])}function W(i){const v=m.value-p.value;n.value<0||!l.value?n.value=0:n.value>=v&&(n.value=v),o.value=!1}function A(){V.value&&(V.value[h.value?"scrollLeft":"scrollTop"]=0)}const G=U(!1);function K(i){if(G.value=!0,!(!l.value||!y.value)){for(const v of i.composedPath())for(const C of y.value.children)if(C===v){n.value=xe({selectedElement:C,containerSize:p.value,contentSize:m.value,isRtl:f.value,currentScrollOffset:n.value,isHorizontal:h.value});return}}}function F(i){G.value=!1}function J(i){var v;!G.value&&!(i.relatedTarget&&((v=y.value)!=null&&v.contains(i.relatedTarget)))&&k()}function ue(i){y.value&&(h.value?i.key==="ArrowRight"?k(f.value?"prev":"next"):i.key==="ArrowLeft"&&k(f.value?"next":"prev"):i.key==="ArrowDown"?k("next"):i.key==="ArrowUp"&&k("prev"),i.key==="Home"?k("first"):i.key==="End"&&k("last"))}function k(i){var v,C,ie,re,ce;if(y.value)if(!i)(v=Ae(y.value)[0])==null||v.focus();else if(i==="next"){const L=(C=y.value.querySelector(":focus"))==null?void 0:C.nextElementSibling;L?L.focus():k("first")}else if(i==="prev"){const L=(ie=y.value.querySelector(":focus"))==null?void 0:ie.previousElementSibling;L?L.focus():k("last")}else i==="first"?(re=y.value.firstElementChild)==null||re.focus():i==="last"&&((ce=y.value.lastElementChild)==null||ce.focus())}function q(i){const v=n.value+(i==="prev"?-1:1)*p.value;n.value=Fe(v,0,m.value-p.value)}const X=P(()=>{let i=n.value>m.value-p.value?-(m.value-p.value)+be(m.value-p.value-n.value):-n.value;n.value<=0&&(i=be(-n.value));const v=f.value&&h.value?-1:1;return{transform:`translate${h.value?"X":"Y"}(${v*i}px)`,transition:o.value?"none":"",willChange:o.value?"transform":""}}),Q=P(()=>({next:t.next,prev:t.prev,select:t.select,isSelected:t.isSelected})),Z=P(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!_.value;case!0:return l.value||Math.abs(n.value)>0;case"mobile":return _.value||l.value||Math.abs(n.value)>0;default:return!_.value&&(l.value||Math.abs(n.value)>0)}}),we=P(()=>Math.abs(n.value)>0),Ce=P(()=>m.value>Math.abs(n.value)+p.value);return oe(()=>s(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!h.value,"v-slide-group--has-affixes":Z.value,"v-slide-group--is-overflowing":l.value},e.class],style:e.style,tabindex:G.value||t.selected.value.length?-1:0,onFocus:J},{default:()=>{var i,v,C;return[Z.value&&s("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!we.value}],onClick:()=>q("prev")},[((i=r.prev)==null?void 0:i.call(r,Q.value))??s(fe,null,{default:()=>[s(me,{icon:f.value?e.nextIcon:e.prevIcon},null)]})]),s("div",{key:"container",ref:V,class:"v-slide-group__container",onScroll:A},[s("div",{ref:y,class:"v-slide-group__content",style:X.value,onTouchstartPassive:u,onTouchmovePassive:T,onTouchendPassive:W,onFocusin:K,onFocusout:F,onKeydown:ue},[(v=r.default)==null?void 0:v.call(r,Q.value)])]),Z.value&&s("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ce.value}],onClick:()=>q("next")},[((C=r.next)==null?void 0:C.call(r,Q.value))??s(fe,null,{default:()=>[s(me,{icon:f.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:t.selected,scrollTo:q,scrollOffset:n,focus:k}}});const ke=Symbol.for("vuetify:v-tabs"),nt=ne({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ee(Ie({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),le=se()({name:"VTab",props:nt(),setup(e,g){let{slots:r,attrs:f}=g;const{textColorClasses:_,textColorStyles:t}=Oe(e,"sliderColor"),l=P(()=>e.direction==="horizontal"),n=U(!1),p=B(),m=B();function h(V){var y,D;let{value:b}=V;if(n.value=b,b){const M=(D=(y=p.value)==null?void 0:y.$el.parentElement)==null?void 0:D.querySelector(".v-tab--selected .v-tab__slider"),I=m.value;if(!M||!I)return;const o=getComputedStyle(M).color,a=M.getBoundingClientRect(),S=I.getBoundingClientRect(),u=l.value?"x":"y",T=l.value?"X":"Y",W=l.value?"right":"bottom",A=l.value?"width":"height",G=a[u],K=S[u],F=G>K?a[W]-S[W]:a[u]-S[u],J=Math.sign(F)>0?l.value?"right":"bottom":Math.sign(F)<0?l.value?"left":"top":"center",k=(Math.abs(F)+(Math.sign(F)<0?a[A]:S[A]))/Math.max(a[A],S[A]),q=a[A]/S[A],X=1.5;Ue(I,{backgroundColor:[o,"currentcolor"],transform:[`translate${T}(${F}px) scale${T}(${q})`,`translate${T}(${F/X}px) scale${T}(${(k-1)/X+1})`,"none"],transformOrigin:Array(3).fill(J)},{duration:225,easing:He})}}return oe(()=>{const[V]=H.filterProps(e);return s(H,ae({symbol:ke,ref:p,class:["v-tab",e.class],style:e.style,tabindex:n.value?0:-1,role:"tab","aria-selected":String(n.value),active:!1,block:e.fixed,maxWidth:e.fixed?300:void 0,rounded:0},V,f,{"onGroup:selected":h}),{default:()=>{var b;return[((b=r.default)==null?void 0:b.call(r))??e.text,!e.hideSlider&&s("div",{ref:m,class:["v-tab__slider",_.value],style:t.value},null)]}})}),{}}});function st(e){return e?e.map(g=>typeof g=="string"?{title:g,value:g}:g):[]}const ot=ne({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ve({mandatory:"force"}),...Ge(),...Se()},"VTabs"),ut=se()({name:"VTabs",props:ot(),emits:{"update:modelValue":e=>!0},setup(e,g){let{slots:r}=g;const f=Le(e,"modelValue"),_=P(()=>st(e.items)),{densityClasses:t}=Ne(e),{backgroundColorClasses:l,backgroundColorStyles:n}=qe(O(e,"bgColor"));return We({VTab:{color:O(e,"color"),direction:O(e,"direction"),stacked:O(e,"stacked"),fixed:O(e,"fixedTabs"),sliderColor:O(e,"sliderColor"),hideSlider:O(e,"hideSlider")}}),oe(()=>{const[p]=_e.filterProps(e);return s(_e,ae(p,{modelValue:f.value,"onUpdate:modelValue":m=>f.value=m,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},t.value,l.value,e.class],style:[{"--v-tabs-height":Xe(e.height)},n.value,e.style],role:"tablist",symbol:ke}),{default:()=>[r.default?r.default():_.value.map(m=>s(le,ae(m,{key:m.title}),null))]})}),{}}}),it=d("h1",{class:"text-center h1-title mb-1"},"會員資訊",-1),rt=d("div",{class:"h1-border"},null,-1),ct={id:"avatar",class:"d-flex align-center flex-column my-2 my-sm-0"},dt={style:{width:"120px",height:"120px",border:"1px solid rgba(0, 0, 0, 0.8)","border-radius":"50%",overflow:"hidden"}},vt=d("h3",{class:"my-4"},"會員名稱",-1),ft={key:1,id:"userName"},mt={class:"d-flex align-center"},pt=d("span",{class:"me-10"},"帳號：",-1),gt={class:"d-flex align-center"},ht=d("span",{class:"me-7"},"E-mail：",-1),yt={key:0},bt={class:"d-flex align-center"},xt=d("span",{class:"me-10"},"地址：",-1),_t={key:0},St={class:"d-flex align-center"},Vt=d("span",{class:"me-10"},"電話：",-1),kt={key:0},wt=d("thead",null,[d("tr",null,[d("th",null,"編號"),d("th",null,"日期"),d("th",null,"金額"),d("th",null,"商品")])],-1),Ct={style:{width:"60%"}},Tt={id:"footer"},At={__name:"AccountView",setup(e){const r=B(["one","two"][0]),f=Ye(),_=B([]),t=B([]),l=B(!1),n=B(!1),p=()=>{l.value=!l.value},m=o=>new Date(o.date).getMonth()<9?`0${(new Date(o.date).getMonth()+1).toString()}`:`${(new Date(o.date).getMonth()+1).toString()}`,h=o=>new Date(o.date).getDate()<9?`0${new Date(o.date).getDate().toString()}`:`${new Date(o.date).getDate().toString()}`,V=o=>o.split("").splice(11).join(""),b=B([]),y=B([]),D=B(null),M=async o=>{try{const a=new FormData;o.email=t.value.email,o.address=t.value.address,o.phone=t.value.phone,o.name=t.value.name,a.append("email",o.email),a.append("address",o.address),a.append("phone",o.phone),a.append("name",o.name),b.value.length>0&&a.append("image",b.value[0].file),await Y.patch("/users/me",a),t.value.email=o.email,t.value.address=o.address,t.value.phone=o.phone,t.value.name=o.name,l.value=!1,f({text:"變更成功",showCloseButton:!1,snackbarProps:{timeout:3e3,color:"green",location:"bottom"}})}catch(a){f({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}},I=async()=>{const{data:o}=await Y.get("/users/me");t.value=o.result,l.value=!1};return(async()=>{try{const{data:o}=await Y.get("/users/me");t.value=o.result}catch(o){f({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}})(),(async()=>{try{const{data:o}=await Y.get("/orders");_.value.push(...o.result.map(a=>(a.total=a.cart.reduce((S,u)=>S+u.product.price*u.quantity,0),a)))}catch(o){f({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}})(),(o,a)=>{const S=je("vue-file-agent");return x(),R(ee,null,[s(tt,{id:"account"},{default:c(()=>[s(te,null,{default:c(()=>[s($,{cols:"12",style:{margin:"20px 0"}},{default:c(()=>[it,rt]),_:1}),s($,{cols:"12"},{default:c(()=>[s(pe,null,{default:c(()=>[s(ut,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=u=>r.value=u),color:"#514742","bg-color":"#D9D9CF","fixed-tabs":""},{default:c(()=>[s(le,{value:"one"},{default:c(()=>[N("個人資訊")]),_:1}),s(le,{value:"two"},{default:c(()=>[N("訂單查詢")]),_:1})]),_:1},8,["modelValue"]),s(Je,null,{default:c(()=>[s(Qe,{modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=u=>r.value=u)},{default:c(()=>[s(ge,{value:"one"},{default:c(()=>[s(te,{class:"align-center"},{default:c(()=>[s($,{cols:"12",sm:"6"},{default:c(()=>[d("div",ct,[d("div",dt,[s(Ze,{src:t.value.avatar,width:"120"},null,8,["src"])]),l.value?(x(),E(H,{key:0,class:"btn-primary",density:"compact",variant:"text",icon:"mdi-pencil",onClick:a[1]||(a[1]=u=>n.value=!0)})):w("",!0),vt,l.value?w("",!0):(x(),R("p",ft,z(t.value.name),1)),l.value?(x(),E(j,{key:2,modelValue:t.value.name,"onUpdate:modelValue":a[2]||(a[2]=u=>t.value.name=u),density:"compact",variant:"outlined",style:{"min-width":"160px"}},null,8,["modelValue"])):w("",!0)])]),_:1}),s($,{cols:"12",sm:"6"},{default:c(()=>[s(te,{id:"accountInfo",class:"flex-column align-center"},{default:c(()=>[s($,null,{default:c(()=>[d("div",mt,[pt,d("span",null,z(t.value.account),1)])]),_:1}),s($,null,{default:c(()=>[d("div",gt,[ht,l.value?w("",!0):(x(),R("span",yt,z(t.value.email),1)),l.value?(x(),E(j,{key:1,modelValue:t.value.email,"onUpdate:modelValue":a[3]||(a[3]=u=>t.value.email=u),density:"compact",variant:"outlined"},null,8,["modelValue"])):w("",!0)])]),_:1}),s($,null,{default:c(()=>[d("div",bt,[xt,l.value?w("",!0):(x(),R("span",_t,z(t.value.address),1)),l.value?(x(),E(j,{key:1,modelValue:t.value.address,"onUpdate:modelValue":a[4]||(a[4]=u=>t.value.address=u),density:"compact",variant:"outlined"},null,8,["modelValue"])):w("",!0)])]),_:1}),s($,null,{default:c(()=>[d("div",St,[Vt,l.value?w("",!0):(x(),R("span",kt,z(t.value.phone),1)),l.value?(x(),E(j,{key:1,modelValue:t.value.phone,"onUpdate:modelValue":a[5]||(a[5]=u=>t.value.phone=u),density:"compact",variant:"outlined"},null,8,["modelValue"])):w("",!0)])]),_:1})]),_:1})]),_:1}),s($,{cols:"12",class:"text-center mt-4"},{default:c(()=>[l.value?w("",!0):(x(),E(H,{key:0,variant:"text",class:"btn-primary",onClick:p},{default:c(()=>[N("編輯")]),_:1})),l.value?(x(),E(H,{key:1,variant:"text",class:"btn-primary me-2",onClick:M},{default:c(()=>[N("變更")]),_:1})):w("",!0),l.value?(x(),E(H,{key:2,variant:"text",color:"red",onClick:I},{default:c(()=>[N("取消")]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),s(ge,{value:"two"},{default:c(()=>[s(he,{class:"tableLayout"},{default:c(()=>[wt,d("tbody",null,[(x(!0),R(ee,null,ye(_.value,u=>(x(),R("tr",{key:u.id},[d("td",null,z(new Date(u.date).getFullYear().toString()+m(u)+h(u)+V(u._id)),1),d("td",null,z(new Date(u.date).toLocaleString()),1),d("td",null,z(u.total),1),d("td",null,[s(he,{class:"tableLayout"},{default:c(()=>[(x(!0),R(ee,null,ye(u.cart,T=>(x(),R("tr",{key:T._id},[d("td",Ct,z(T.product.name)+"：",1),d("td",null,z(T.quantity)+" 個",1)]))),128))]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(Ke,{persistent:"",modelValue:n.value,"onUpdate:modelValue":a[10]||(a[10]=u=>n.value=u),width:"500px"},{default:c(()=>[s(pe,null,{default:c(()=>[s(S,{modelValue:b.value,"onUpdate:modelValue":a[7]||(a[7]=u=>b.value=u),"raw-model-value":y.value,"onUpdate:rawModelValue":a[8]||(a[8]=u=>y.value=u),"max-files":1,"max-size":"1MB",accept:"image/jpg,image/jpeg,image/png",multiple:!1,"error-text":{type:"檔案格式錯誤",size:"檔案太大"},"help-text":"選擇檔案或拖放",deletable:"true",ref_key:"fileAgent",ref:D},null,8,["modelValue","raw-model-value"]),s(et,null,{default:c(()=>[s(H,{class:"btn-primary",block:"",onClick:a[9]||(a[9]=u=>n.value=!1)},{default:c(()=>[N("關閉視窗")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),d("section",Tt,[s(Te)])],64)}}};export{At as default};
