import{F as Te}from"./FooterView-bb3bbdc1.js";import{p as ne,I as de,b as ze,f as Se,an as Pe,g as se,ao as Be,C as Re,ap as $e,aq as U,D as P,a1 as ve,ar as De,a3 as Me,u as oe,c as s,as as fe,s as me,at as Ae,a5 as Fe,au as Ee,m as Ie,n as Oe,E as B,V as G,a as ae,av as Ue,aw as Ge,ax as He,ay as Le,az as Ne,j as qe,t as O,aA as We,aB as Xe,z as Ye,_ as Y,F as je,G as x,H as R,L as c,aC as Ke,S as v,O as ee,ah as ge,W as N,ag as Je,aD as Qe,aE as pe,P as Ze,K as E,N as w,X as z,am as j,aF as he,R as ye,aG as et}from"./index-0982c80b.js";import{V as tt}from"./VContainer-43cc2aa7.js";import{V as te,a as $}from"./VRow-1651238a.js";import"./logo_lineImg_light-dd5d790e.js";import"./logo_word_light-deaadfda.js";/* empty css              */function be(e){const r=Math.abs(e);return Math.sign(e)*(r/((1/.501-2)*(1-r)+1))}function xe(e){let{selectedElement:p,containerSize:r,contentSize:f,isRtl:_,currentScrollOffset:t,isHorizontal:l}=e;const n=l?p.clientWidth:p.clientHeight,g=l?p.offsetLeft:p.offsetTop,m=_&&l?f-g-n:g,h=r+t,V=n+m,b=n*.4;return m<=t?t=Math.max(m-b,0):h<=V&&(t=Math.min(t-(h-V-b),f-r)),t}function at(e){let{selectedElement:p,containerSize:r,contentSize:f,isRtl:_,isHorizontal:t}=e;const l=t?p.clientWidth:p.clientHeight,n=t?p.offsetLeft:p.offsetTop,g=_&&t?f-n-l/2-r/2:n+l/2-r/2;return Math.min(f-r,Math.max(0,g))}const lt=Symbol.for("vuetify:v-slide-group"),Ve=ne({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:lt},nextIcon:{type:de,default:"$next"},prevIcon:{type:de,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...ze(),...Se(),...Pe({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),_e=se()({name:"VSlideGroup",props:Ve(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:r}=p;const{isRtl:f}=Be(),{mobile:_}=Re(),t=$e(e,e.symbol),l=U(!1),n=U(0),g=U(0),m=U(0),h=P(()=>e.direction==="horizontal"),{resizeRef:V,contentRect:b}=ve(),{resizeRef:y,contentRect:D}=ve(),M=P(()=>t.selected.value.length?t.items.value.findIndex(i=>i.id===t.selected.value[0]):-1),I=P(()=>t.selected.value.length?t.items.value.findIndex(i=>i.id===t.selected.value[t.selected.value.length-1]):-1);if(De){let i=-1;Me(()=>[t.selected.value,b.value,D.value,h.value],()=>{cancelAnimationFrame(i),i=requestAnimationFrame(()=>{if(b.value&&D.value){const d=h.value?"width":"height";g.value=b.value[d],m.value=D.value[d],l.value=g.value+1<m.value}if(M.value>=0&&y.value){const d=y.value.children[I.value];M.value===0||!l.value?n.value=0:e.centerActive?n.value=at({selectedElement:d,containerSize:g.value,contentSize:m.value,isRtl:f.value,isHorizontal:h.value}):l.value&&(n.value=xe({selectedElement:d,containerSize:g.value,contentSize:m.value,isRtl:f.value,currentScrollOffset:n.value,isHorizontal:h.value}))}})})}const o=U(!1);let a=0,S=0;function u(i){const d=h.value?"clientX":"clientY";S=(f.value&&h.value?-1:1)*n.value,a=i.touches[0][d],o.value=!0}function T(i){if(!l.value)return;const d=h.value?"clientX":"clientY",C=f.value&&h.value?-1:1;n.value=C*(S+a-i.touches[0][d])}function W(i){const d=m.value-g.value;n.value<0||!l.value?n.value=0:n.value>=d&&(n.value=d),o.value=!1}function A(){V.value&&(V.value[h.value?"scrollLeft":"scrollTop"]=0)}const H=U(!1);function K(i){if(H.value=!0,!(!l.value||!y.value)){for(const d of i.composedPath())for(const C of y.value.children)if(C===d){n.value=xe({selectedElement:C,containerSize:g.value,contentSize:m.value,isRtl:f.value,currentScrollOffset:n.value,isHorizontal:h.value});return}}}function F(i){H.value=!1}function J(i){var d;!H.value&&!(i.relatedTarget&&((d=y.value)!=null&&d.contains(i.relatedTarget)))&&k()}function ue(i){y.value&&(h.value?i.key==="ArrowRight"?k(f.value?"prev":"next"):i.key==="ArrowLeft"&&k(f.value?"next":"prev"):i.key==="ArrowDown"?k("next"):i.key==="ArrowUp"&&k("prev"),i.key==="Home"?k("first"):i.key==="End"&&k("last"))}function k(i){var d,C,ie,re,ce;if(y.value)if(!i)(d=Ae(y.value)[0])==null||d.focus();else if(i==="next"){const L=(C=y.value.querySelector(":focus"))==null?void 0:C.nextElementSibling;L?L.focus():k("first")}else if(i==="prev"){const L=(ie=y.value.querySelector(":focus"))==null?void 0:ie.previousElementSibling;L?L.focus():k("last")}else i==="first"?(re=y.value.firstElementChild)==null||re.focus():i==="last"&&((ce=y.value.lastElementChild)==null||ce.focus())}function q(i){const d=n.value+(i==="prev"?-1:1)*g.value;n.value=Fe(d,0,m.value-g.value)}const X=P(()=>{let i=n.value>m.value-g.value?-(m.value-g.value)+be(m.value-g.value-n.value):-n.value;n.value<=0&&(i=be(-n.value));const d=f.value&&h.value?-1:1;return{transform:`translate${h.value?"X":"Y"}(${d*i}px)`,transition:o.value?"none":"",willChange:o.value?"transform":""}}),Q=P(()=>({next:t.next,prev:t.prev,select:t.select,isSelected:t.isSelected})),Z=P(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!_.value;case!0:return l.value||Math.abs(n.value)>0;case"mobile":return _.value||l.value||Math.abs(n.value)>0;default:return!_.value&&(l.value||Math.abs(n.value)>0)}}),we=P(()=>Math.abs(n.value)>0),Ce=P(()=>m.value>Math.abs(n.value)+g.value);return oe(()=>s(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!h.value,"v-slide-group--has-affixes":Z.value,"v-slide-group--is-overflowing":l.value},e.class],style:e.style,tabindex:H.value||t.selected.value.length?-1:0,onFocus:J},{default:()=>{var i,d,C;return[Z.value&&s("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!we.value}],onClick:()=>q("prev")},[((i=r.prev)==null?void 0:i.call(r,Q.value))??s(fe,null,{default:()=>[s(me,{icon:f.value?e.nextIcon:e.prevIcon},null)]})]),s("div",{key:"container",ref:V,class:"v-slide-group__container",onScroll:A},[s("div",{ref:y,class:"v-slide-group__content",style:X.value,onTouchstartPassive:u,onTouchmovePassive:T,onTouchendPassive:W,onFocusin:K,onFocusout:F,onKeydown:ue},[(d=r.default)==null?void 0:d.call(r,Q.value)])]),Z.value&&s("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!Ce.value}],onClick:()=>q("next")},[((C=r.next)==null?void 0:C.call(r,Q.value))??s(fe,null,{default:()=>[s(me,{icon:f.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:t.selected,scrollTo:q,scrollOffset:n,focus:k}}});const ke=Symbol.for("vuetify:v-tabs"),nt=ne({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Ee(Ie({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),le=se()({name:"VTab",props:nt(),setup(e,p){let{slots:r,attrs:f}=p;const{textColorClasses:_,textColorStyles:t}=Oe(e,"sliderColor"),l=P(()=>e.direction==="horizontal"),n=U(!1),g=B(),m=B();function h(V){var y,D;let{value:b}=V;if(n.value=b,b){const M=(D=(y=g.value)==null?void 0:y.$el.parentElement)==null?void 0:D.querySelector(".v-tab--selected .v-tab__slider"),I=m.value;if(!M||!I)return;const o=getComputedStyle(M).color,a=M.getBoundingClientRect(),S=I.getBoundingClientRect(),u=l.value?"x":"y",T=l.value?"X":"Y",W=l.value?"right":"bottom",A=l.value?"width":"height",H=a[u],K=S[u],F=H>K?a[W]-S[W]:a[u]-S[u],J=Math.sign(F)>0?l.value?"right":"bottom":Math.sign(F)<0?l.value?"left":"top":"center",k=(Math.abs(F)+(Math.sign(F)<0?a[A]:S[A]))/Math.max(a[A],S[A]),q=a[A]/S[A],X=1.5;Ue(I,{backgroundColor:[o,"currentcolor"],transform:[`translate${T}(${F}px) scale${T}(${q})`,`translate${T}(${F/X}px) scale${T}(${(k-1)/X+1})`,"none"],transformOrigin:Array(3).fill(J)},{duration:225,easing:Ge})}}return oe(()=>{const[V]=G.filterProps(e);return s(G,ae({symbol:ke,ref:g,class:["v-tab",e.class],style:e.style,tabindex:n.value?0:-1,role:"tab","aria-selected":String(n.value),active:!1,block:e.fixed,maxWidth:e.fixed?300:void 0,rounded:0},V,f,{"onGroup:selected":h}),{default:()=>{var b;return[((b=r.default)==null?void 0:b.call(r))??e.text,!e.hideSlider&&s("div",{ref:m,class:["v-tab__slider",_.value],style:t.value},null)]}})}),{}}});function st(e){return e?e.map(p=>typeof p=="string"?{title:p,value:p}:p):[]}const ot=ne({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ve({mandatory:"force"}),...He(),...Se()},"VTabs"),ut=se()({name:"VTabs",props:ot(),emits:{"update:modelValue":e=>!0},setup(e,p){let{slots:r}=p;const f=Le(e,"modelValue"),_=P(()=>st(e.items)),{densityClasses:t}=Ne(e),{backgroundColorClasses:l,backgroundColorStyles:n}=qe(O(e,"bgColor"));return We({VTab:{color:O(e,"color"),direction:O(e,"direction"),stacked:O(e,"stacked"),fixed:O(e,"fixedTabs"),sliderColor:O(e,"sliderColor"),hideSlider:O(e,"hideSlider")}}),oe(()=>{const[g]=_e.filterProps(e);return s(_e,ae(g,{modelValue:f.value,"onUpdate:modelValue":m=>f.value=m,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},t.value,l.value,e.class],style:[{"--v-tabs-height":Xe(e.height)},n.value,e.style],role:"tablist",symbol:ke}),{default:()=>[r.default?r.default():_.value.map(m=>s(le,ae(m,{key:m.title}),null))]})}),{}}}),it=v("h1",{class:"text-center h1-title mb-1"},"會員資訊",-1),rt=v("div",{class:"h1-border"},null,-1),ct={id:"avatar",class:"d-flex align-center flex-column my-2 my-sm-0"},dt=v("h3",{class:"my-4"},"會員名稱",-1),vt={key:1,id:"userName"},ft={class:"d-flex align-center"},mt=v("span",{class:"me-10"},"帳號：",-1),gt={class:"d-flex align-center"},pt=v("span",{class:"me-7"},"E-mail：",-1),ht={key:0},yt={class:"d-flex align-center"},bt=v("span",{class:"me-10"},"地址：",-1),xt={key:0},_t={class:"d-flex align-center"},St=v("span",{class:"me-10"},"電話：",-1),Vt={key:0},kt=v("thead",null,[v("tr",null,[v("th",null,"編號"),v("th",null,"日期"),v("th",null,"金額"),v("th",null,"商品")])],-1),wt={style:{width:"60%"}},Ct={id:"footer"},Mt={__name:"AccountView",setup(e){const r=B(["one","two"][0]),f=Ye(),_=B([]),t=B([]),l=B(!1),n=B(!1),g=()=>{l.value=!l.value},m=o=>new Date(o.date).getMonth()<9?`0${(new Date(o.date).getMonth()+1).toString()}`:`${(new Date(o.date).getMonth()+1).toString()}`,h=o=>new Date(o.date).getDate()<9?`0${new Date(o.date).getDate().toString()}`:`${new Date(o.date).getDate().toString()}`,V=o=>o.split("").splice(11).join(""),b=B([]),y=B([]),D=B(null),M=async o=>{try{const a=new FormData;o.email=t.value.email,o.address=t.value.address,o.phone=t.value.phone,o.name=t.value.name,a.append("email",o.email),a.append("address",o.address),a.append("phone",o.phone),a.append("name",o.name),b.value.length>0&&a.append("image",b.value[0].file),await Y.patch("/users/me",a),t.value.email=o.email,t.value.address=o.address,t.value.phone=o.phone,t.value.name=o.name,l.value=!1,f({text:"變更成功",showCloseButton:!1,snackbarProps:{timeout:3e3,color:"green",location:"bottom"}})}catch(a){f({text:a.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}},I=async()=>{const{data:o}=await Y.get("/users/me");t.value=o.result,l.value=!1};return(async()=>{try{const{data:o}=await Y.get("/users/me");t.value=o.result}catch(o){f({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}})(),(async()=>{try{const{data:o}=await Y.get("/orders");_.value.push(...o.result.map(a=>(a.total=a.cart.reduce((S,u)=>S+u.product.price*u.quantity,0),a)))}catch(o){f({text:o.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"red",location:"bottom"}})}})(),(o,a)=>{const S=je("vue-file-agent");return x(),R(ee,null,[s(tt,{id:"account"},{default:c(()=>[s(te,null,{default:c(()=>[s($,{cols:"12",style:{margin:"20px 0"}},{default:c(()=>[it,rt]),_:1}),s($,{cols:"12"},{default:c(()=>[s(ge,null,{default:c(()=>[s(ut,{modelValue:r.value,"onUpdate:modelValue":a[0]||(a[0]=u=>r.value=u),color:"#514742","bg-color":"#D9D9CF","fixed-tabs":""},{default:c(()=>[s(le,{value:"one"},{default:c(()=>[N("個人資訊")]),_:1}),s(le,{value:"two"},{default:c(()=>[N("訂單查詢")]),_:1})]),_:1},8,["modelValue"]),s(Je,null,{default:c(()=>[s(Qe,{modelValue:r.value,"onUpdate:modelValue":a[6]||(a[6]=u=>r.value=u)},{default:c(()=>[s(pe,{value:"one"},{default:c(()=>[s(te,{class:"align-center"},{default:c(()=>[s($,{cols:"12",sm:"6"},{default:c(()=>[v("div",ct,[s(Ze,{src:t.value.avatar,width:"120",style:{border:"1px solid rgba(0, 0, 0, 0.8)","border-radius":"50%"}},null,8,["src"]),l.value?(x(),E(G,{key:0,class:"btn-primary",density:"compact",variant:"text",icon:"mdi-pencil",onClick:a[1]||(a[1]=u=>n.value=!0)})):w("",!0),dt,l.value?w("",!0):(x(),R("p",vt,z(t.value.name),1)),l.value?(x(),E(j,{key:2,modelValue:t.value.name,"onUpdate:modelValue":a[2]||(a[2]=u=>t.value.name=u),density:"compact",variant:"outlined",style:{"min-width":"160px"}},null,8,["modelValue"])):w("",!0)])]),_:1}),s($,{cols:"12",sm:"6"},{default:c(()=>[s(te,{id:"accountInfo",class:"flex-column align-center"},{default:c(()=>[s($,null,{default:c(()=>[v("div",ft,[mt,v("span",null,z(t.value.account),1)])]),_:1}),s($,null,{default:c(()=>[v("div",gt,[pt,l.value?w("",!0):(x(),R("span",ht,z(t.value.email),1)),l.value?(x(),E(j,{key:1,modelValue:t.value.email,"onUpdate:modelValue":a[3]||(a[3]=u=>t.value.email=u),density:"compact",variant:"outlined"},null,8,["modelValue"])):w("",!0)])]),_:1}),s($,null,{default:c(()=>[v("div",yt,[bt,l.value?w("",!0):(x(),R("span",xt,z(t.value.address),1)),l.value?(x(),E(j,{key:1,modelValue:t.value.address,"onUpdate:modelValue":a[4]||(a[4]=u=>t.value.address=u),density:"compact",variant:"outlined"},null,8,["modelValue"])):w("",!0)])]),_:1}),s($,null,{default:c(()=>[v("div",_t,[St,l.value?w("",!0):(x(),R("span",Vt,z(t.value.phone),1)),l.value?(x(),E(j,{key:1,modelValue:t.value.phone,"onUpdate:modelValue":a[5]||(a[5]=u=>t.value.phone=u),density:"compact",variant:"outlined"},null,8,["modelValue"])):w("",!0)])]),_:1})]),_:1})]),_:1}),s($,{cols:"12",class:"text-center mt-4"},{default:c(()=>[l.value?w("",!0):(x(),E(G,{key:0,variant:"text",class:"btn-primary",onClick:g},{default:c(()=>[N("編輯")]),_:1})),l.value?(x(),E(G,{key:1,variant:"text",class:"btn-primary me-2",onClick:M},{default:c(()=>[N("變更")]),_:1})):w("",!0),l.value?(x(),E(G,{key:2,variant:"text",color:"red",onClick:I},{default:c(()=>[N("取消")]),_:1})):w("",!0)]),_:1})]),_:1})]),_:1}),s(pe,{value:"two"},{default:c(()=>[s(he,{class:"tableLayout"},{default:c(()=>[kt,v("tbody",null,[(x(!0),R(ee,null,ye(_.value,u=>(x(),R("tr",{key:u.id},[v("td",null,z(new Date(u.date).getFullYear().toString()+m(u)+h(u)+V(u._id)),1),v("td",null,z(new Date(u.date).toLocaleString()),1),v("td",null,z(u.total),1),v("td",null,[s(he,{class:"tableLayout"},{default:c(()=>[(x(!0),R(ee,null,ye(u.cart,T=>(x(),R("tr",{key:T._id},[v("td",wt,z(T.product.name)+"：",1),v("td",null,z(T.quantity)+" 個",1)]))),128))]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(Ke,{persistent:"",modelValue:n.value,"onUpdate:modelValue":a[10]||(a[10]=u=>n.value=u),width:"500px"},{default:c(()=>[s(ge,null,{default:c(()=>[s(S,{modelValue:b.value,"onUpdate:modelValue":a[7]||(a[7]=u=>b.value=u),"raw-model-value":y.value,"onUpdate:rawModelValue":a[8]||(a[8]=u=>y.value=u),"max-files":1,"max-size":"1MB",accept:"image/jpg,image/jpeg,image/png",multiple:!1,"error-text":{type:"檔案格式錯誤",size:"檔案太大"},"help-text":"選擇檔案或拖放",deletable:"true",ref_key:"fileAgent",ref:D},null,8,["modelValue","raw-model-value"]),s(et,null,{default:c(()=>[s(G,{class:"btn-primary",block:"",onClick:a[9]||(a[9]=u=>n.value=!1)},{default:c(()=>[N("關閉視窗")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),v("section",Ct,[s(Te)])],64)}}};export{Mt as default};
